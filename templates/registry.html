{% extends "layout.html" %}
{% block content %}
  <h1>Gift Registry</h1>

  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <ul class="flash-messages">
        {% for message in messages %}
          <li>{{ message }}</li>
        {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}

  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Price</th>
        <th>Purchased</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
        <tr>
          <td>{{ item.name }}</td>
          <td>{{ item.price }}</td>
          <td>
            {% if item.purchased %}
              Yes
            {% else %}
              No
            {% endif %}
          </td>
          <td>
            {% if not item.purchased %}
              <button class="mark-purchased-btn" data-item-id="{{ item.id }}">Mark as Purchased</button>
            {% endif %}
            <button class="delete-item-btn" data-item-id="{{ item.id }}">Delete</button>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
